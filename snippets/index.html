
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../QField/group__core/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Code Snippets - QField API Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#qfield-plugin-code-snippets" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="QField API Documentation" class="md-header__button md-logo" aria-label="QField API Documentation" data-md-component="logo">
      
  <img src="../assets/images/qfield_logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QField API Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Code Snippets
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.768 3.96zl-.002-.005a9 9 0 0 0-.218-.779c-.13-.394.21-.8.602-.67q.435.144.855.328l.01.005A10.002 10.002 0 0 1 12 22a10 10 0 0 1-9.162-5.985l-.004-.01a10 10 0 0 1-.329-.855c-.13-.392.277-.732.67-.602q.386.126.78.218l.004.002A9 9 0 0 0 14.999 6a9 9 0 0 0-.231-2.04M16.5 6c0 5.799-4.701 10.5-10.5 10.5q-.64 0-1.26-.075A8.5 8.5 0 1 0 16.425 4.74q.075.62.075 1.259Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14m0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 1 0 0 11m-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0M3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06M12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0M4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12m8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20m12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12m-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.75.75 0 0 1-.018 1.042.75.75 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061m2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="QField API Documentation" class="md-nav__button md-logo" aria-label="QField API Documentation" data-md-component="logo">
      
  <img src="../assets/images/qfield_logo_white.svg" alt="logo">

    </a>
    QField API Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Code Snippets
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Snippets
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-emergency-phone-call-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add emergency phone call action
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-the-map-canvas-center-or-extent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Change the map canvas center or extent
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetch-the-current-position-from-an-active-gnss-device" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fetch the current position from an active GNSS device
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrate-with-the-search-bar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integrate with the search bar
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-plugin-configuration-button-in-the-plugin-manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add a plugin configuration button in the plugin manager
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flash-geometries-on-top-of-the-map-canvas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flash geometries on top of the map canvas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-project-variable-through-dialog-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add a project variable through dialog input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#register-a-map-canvas-point-handler-to-take-over-taps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Register a map canvas point handler to take over taps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../QField/group__core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C++ Classes
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../QField/group__qml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QML Items
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-emergency-phone-call-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add emergency phone call action
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-the-map-canvas-center-or-extent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Change the map canvas center or extent
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fetch-the-current-position-from-an-active-gnss-device" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fetch the current position from an active GNSS device
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrate-with-the-search-bar" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integrate with the search bar
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-plugin-configuration-button-in-the-plugin-manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add a plugin configuration button in the plugin manager
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flash-geometries-on-top-of-the-map-canvas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flash geometries on top of the map canvas
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-project-variable-through-dialog-input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add a project variable through dialog input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#register-a-map-canvas-point-handler-to-take-over-taps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Register a map canvas point handler to take over taps
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="qfield-plugin-code-snippets">QField Plugin Code Snippets</h1>
<p>Below are useful code snippets that will teach you ways to work within the plugin framework.</p>
<h2 id="add-emergency-phone-call-action">Add emergency phone call action</h2>
<p>Mobile devices can handle several useful hyperlinks protocols such as <code>tel:</code> and <code>mailto:</code>. The code below will add a tool button on the map canvas offering field works a quick way to call an emergency number using the <code>Qt.openUrlExternally</code> function:</p>
<pre><code class="language-qml">import QtQuick
import org.qfield
import Theme

Item {
  QfToolButton {
    id: emergencyCall

    iconSource: Theme.getThemeVectorIcon(&quot;ic_info_white_24dp&quot;)
    iconColor: Theme.toolButtonColor
    bgcolor: Theme.toolButtonBackgroundColor
    round: true

    onClicked: {
      Qt.openUrlExternally('tel:+1800123456');
    }
  }

  Component.onCompleted: {
    iface.addItemToPluginsToolbar(emergencyCall)
  }
}
</code></pre>
<h2 id="change-the-map-canvas-center-or-extent">Change the map canvas center or extent</h2>
<p>This code below will re-center the map canvas around a WGS84 point reprojected to match the current project CRS by using <a href="../QField/classGeometryUtils/"><code>GeometryUtils</code></a> functions.</p>
<pre><code class="language-qml">import QtQuick
import org.qfield
import Theme

Item {
  QfToolButton {
    id: gotoPoint

    iconSource: Theme.getThemeVectorIcon(&quot;ic_geotag_white_24dp&quot;)
    iconColor: Theme.toolButtonColor
    bgcolor: Theme.toolButtonBackgroundColor
    round: true

    onClicked: {
      const point = GeometryUtils.point(174.7656025, -36.8533493);
      const projectedPoint = GeometryUtils.reprojectPoint(point, CoordinateReferenceSystemUtils.wgs84Crs(), qgisProject.crs);
      iface.mapCanvas().mapSettings.center = projectedPoint;
    }
  }

  Component.onCompleted: {
    iface.addItemToPluginsToolbar(gotoPoint)
  }
}
</code></pre>
<p>It's also possible to use an extent instead of a point to be in control of the scale. The <code>onClicked</code> function would be changed to this instead:</p>
<pre><code class="language-qml">    onClicked: {
      const point1 = GeometryUtils.point(174.7646543, -36.8519053);
      const point2 = GeometryUtils.point(174.7682343, -36.8542590);
      const extent = GeometryUtils.createRectangleFromPoints(point1, point2);
      const projectedExtent = GeometryUtils.reprojectRectangle(extent, CoordinateReferenceSystemUtils.wgs84Crs(), qgisProject.crs);
      iface.mapCanvas().mapSettings.extent = projectedExtent;
    }
</code></pre>
<h2 id="fetch-the-current-position-from-an-active-gnss-device">Fetch the current position from an active GNSS device</h2>
<p>One of the basic functionality you will likely seek is the ability to retrieve the current position from an active GNSS device. This code will copy the current position inside your device's clipboard:</p>
<pre><code class="language-qml">import QtQuick
import org.qfield
import Theme

Item {
  QfToolButton {
    id: copyPositionToClipboard

    iconSource: Theme.getThemeVectorIcon(&quot;ic_copy_black_24dp&quot;)
    iconColor: Theme.toolButtonColor
    bgcolor: Theme.toolButtonBackgroundColor
    round: true

    onClicked: {
      let positioning = iface.findItemByObjectName('positionSource');
      if (positioning.active) {
        const info = positioning.positionInformation;
        if (info.longitudeValid &amp;&amp; info.latitudeValid) {
          const text = info.latitude + ', ' + info.longitude;
          platformUtilities.copyTextToClipboard(text);
          iface.mainWindow().displayToast('Position copied into the clipboard');
        }
      }
    }
  }

  Component.onCompleted: {
    iface.addItemToPluginsToolbar(copyPositionToClipboard)
  }
}
</code></pre>
<h2 id="integrate-with-the-search-bar">Integrate with the search bar</h2>
<p>The plugin framework empowers you to integrate custom searches into the QField search bar through the <a href="../QField/classQFieldLocatorFilter/"><code>QFieldLocatorFilter</code></a> item which can be added into a plugin's root item:</p>
<pre><code class="language-qml">QFieldLocatorFilter {
  id: locatorFilter

  delay: 1000
  name: &quot;unique_filter_string&quot;
  displayName: &quot;Plugin filter&quot;
  prefix: &quot;plug&quot;
  locatorBridge: iface.findItemByObjectName('locatorBridge')

  parameters: { &quot;parameter_1&quot;: &quot;value_1&quot; }
  source: Qt.resolvedUrl('search.qml')

  function triggerResult(result) {
    // result is a QgsLocatorResult object with the following properties:
    // - description, displayString, group, groupScore, score, and userData
  }

  function triggerResultFromAction(result, actionId) {
    // additional actions handled here
  }
}
</code></pre>
<p>The source property refers to a QML source file which will hold the logic to execute searches and pass on results.
It will be executed off the main thread to allow for non-blocking result fetching operations.</p>
<p>Here's a simple search QML source code:</p>
<pre><code class="language-qml">import QtQuick
import org.qfield

Item {
  signal prepareResult(var details)
  signal fetchResultsEnded()

  function fetchResults(string, context, parameters) {
    // string is the search term(s) typed into the search bar
    // context is a QgsLocatorContext object with the following properties:
    // - targetExtent, targetExtentCrs, and transformContext
    // parameters is a map of keys and values attached to the QFieldLocatorFilter parameters properties

    // sample details object
    let result_details = {
      &quot;userData&quot;: { &quot;key&quot;: &quot;value&quot; },
      &quot;displayString&quot;: &quot;display string&quot;,
      &quot;description&quot;: &quot;description&quot;,
      &quot;score&quot;: 1,
      &quot;group&quot;: &quot;group name&quot;,
      &quot;groupScore&quot;:1,
      &quot;actions&quot;:[{&quot;id&quot;: 2, &quot;name&quot;: &quot;action&quot;, &quot;icon&quot;: &quot;icon.svg&quot;}]
    }

    // prepareResult is the signal needed to pass on a result
    // you can trigger the signal as many times as you need to pass on all available results
    prepareResult(result_details);
  }
}
</code></pre>
<p>This <a href="https://github.com/opengisch/qfield-nominatim-locator">QField OpenStreetMap Nomination plugin</a> is a good example to learn more about search bar integration.</p>
<h2 id="add-a-plugin-configuration-button-in-the-plugin-manager">Add a plugin configuration button in the plugin manager</h2>
<p>For plugins requiring user configuration, QField allows for these to add a configuration button within its plugin manager.</p>
<p>To do so, you can simply add a <code>function configure()</code> invocable function attached to the plugin's root item:</p>
<pre><code class="language-qml">import QtQuick
import org.qfield

Item {
  // ...

  function configure()
  {
    optionDialog.open();
  }

  Dialog {
    id: optionDialog
    parent: iface.mainWindow().contentItem
    visible: false
    modal: true
    title: &quot;Configuration&quot;

    // ...
  }
}
</code></pre>
<h2 id="flash-geometries-on-top-of-the-map-canvas">Flash geometries on top of the map canvas</h2>
<p>Plugins can make use of QField's <a href="../QField/classGeometryHighlighter/"><code>GeometryHighlighter</code></a> item to flash created or fetched geometries through the following code:</p>
<pre><code class="language-qml">import QtQuick
import org.qfield

Item {
  // ...

  property var geometryHighlighter: iface.findItemByObjectName('geometryHighlighter')

  function demo() {
    // Flash Null Island geometry
    let geom = GeometryUtils.createGeometryFromWkt(&quot;POINT(0 0)&quot;)
    let crs = CoordinateReferenceSystemUtils.fromDescription(&quot;EPSG:4326&quot;)

    geometryHighlighter.geometryWrapper.qgsGeometry = geometry
    geometryHighlighter.geometryWrapper.crs = crs;
  }
}
</code></pre>
<h2 id="add-a-project-variable-through-dialog-input">Add a project variable through dialog input</h2>
<p>This example demonstrates how to check for a given project variable on project load and asks the user for a value if not present or empty through <a href="../QField/classExpressionContextUtils/"><code>ExpressionContextUtils</code></a> functions. The plugin also uses the projectInfo object to save the variable across sessions.</p>
<pre><code class="language-qml">import QtQuick
import QtQuick.Controls
import org.qfield
import Theme

Item {
  Connections {
    target: iface

    function onLoadProjectEnded() {
      const variables = ExpressionContextUtils.projectVariables(qgisProject);
      if (variables[&quot;favorite_icecream&quot;] === undefined || variables[&quot;favorite_icecream&quot;] === &quot;&quot;) {
        favoriteIceCreamDialog.open();
      }
    }
  }

  QfDialog {
    id: favoriteIceCreamDialog
    parent: iface.mainWindow().contentItem

    width: 300
    height: 180
    x: (iface.mainWindow().width - width) / 2
    y: (iface.mainWindow().height - height) / 2
    title: &quot;What is your favorite ice cream?&quot;

    Column {
      id: columnLayout
      width: parent.width

      TextField {
        id: favoriteIceCreamField
        width: parent.width
        text: &quot;&quot;
      }
    }

    onAccepted: {
      ExpressionContextUtils.setProjectVariable(qgisProject, &quot;favorite_icecream&quot;, favoriteIceCreamField.text);
      let projectInfo = iface.findItemByObjectName(&quot;projectInfo&quot;);
      projectInfo.saveVariable(&quot;favorite_icecream&quot;, favoriteIceCreamField.text);
    }
  }
}
</code></pre>
<h2 id="register-a-map-canvas-point-handler-to-take-over-taps">Register a map canvas point handler to take over taps</h2>
<p>Plugins can take over map canvas taps behavior by registering an handler with the <a href="../QField/classMapCanvasPointHandler/"><code>MapCanvasPointHandler</code></a> object. The code snippet below will look for features within a given layer and return an attribute instead of showing the features list. Feature iteration is done using functions provided by the <a href="../QField/classLayerUtils/"><code>LayerUtils</code></a> class.</p>
<pre><code class="language-qml">pointHandler.registerHandler(&quot;feature_iteration_example&quot;, (point, type, interactionType) =&gt; {
  if (interactionType === &quot;clicked&quot;) {
    let mapCanvas = iface.mapCanvas();
    const tl = mapCanvas.mapSettings.screenToCoordinate(Qt.point(point.x - 4, point.y - 4));
    const br = mapCanvas.mapSettings.screenToCoordinate(Qt.point(point.x + 4, point.y + 4));

    const rectangle = GeometryUtils.createRectangleFromPoints(tl, br);
    let it = LayerUtils.createFeatureIteratorFromRectangle(qgisProject.mapLayersByName(&quot;my_layer&quot;)[0], rectangle);
    if (it.hasNext()) {
      const feature = it.next()
      mainWindow.displayToast(&quot;Feature found! It's name is &quot; + feature.attribute(&quot;name&quot;))
    }
    return true;
  }
  return false;
});
</code></pre>
<p>By returning true, we are telling QField that we have taken over the handling and provided the desired action.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 <a href="https://OPENGIS.ch">OPENGIS.ch</a> -  <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC-BY-SA 4.0</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>